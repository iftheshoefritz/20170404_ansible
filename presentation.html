<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Intro to Ansible</title>
    <!-- Styles -->
    
    <link rel="stylesheet" href="file:///usr/local/lib/python2.7/site-packages/darkslide/themes/default/css/base.css">
    <link rel="stylesheet" media="print" href="file:///usr/local/lib/python2.7/site-packages/darkslide/themes/default/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="file:///usr/local/lib/python2.7/site-packages/darkslide/themes/default/css/screen.css">
    <link rel="stylesheet" href="file:///usr/local/lib/python2.7/site-packages/darkslide/themes/default/css/theme.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="file:///usr/local/lib/python2.7/site-packages/darkslide/themes/default/js/slides.js"></script>
    
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-1">
          <div class="inner">
            
            <header><h1>Intro to Ansible</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Non-dev friendly talk</p>
<p>Giving Prodigy perspective on this tool, there's a lot more that we don't use, but I can only give some of the
possibilities, and I don't want to cover too much that's not immediately useful</p>
<p>Need to give some background, stick with me before I get to real code, hopefully explain why we need to be
able to do this stuff, and be able to transfer principles to whatever the next tool is.</p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              1/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-2">
          <div class="inner">
            
            <header><h1>Doing stuff with code</h1></header>
            
            
            <section><ol>
<li>get new machine - Macbook from Rob</li>
<li>get it ready for an app - install e.g. git, ruby, postgres, vim</li>
<li>put your code on it - e.g. git clone</li>
<li>so much winning</li>
</ol></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>We've all gone through this cycle, as you build more apps or use more computers (or servers) you go through it
more often. But we've all done it at least once. </p>
<p>When I started working at prodigy I got a new laptop from Rob, then I installed stuff on it, then I got the
code, then I started to dev.  </p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              2/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-3">
          <div class="inner">
            
            <header><h2>Web app deployment</h2></header>
            
            
            <section><ol>
<li>get servers</li>
<li>install stuff</li>
<li>Copy the app</li>
<li>so much winning, now over the Internet</li>
</ol></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Almost all of our apps are web applications accessed by users with their web browsers over the Internet.
So that means we have to have a server on the Internet.</p>
<p>We still have similar 4 steps - get a computer, install stuff, get the code, lots of winning</p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              3/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-4">
          <div class="inner">
            
            <header><h2>Cloud deployment, e.g. AWS</h2></header>
            
            
            <section><ol>
<li>get instance on AWS EC2</li>
<li>install stuff</li>
<li>Copy the app</li>
<li>so much winning, now in the cloud</li>
</ol></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Now let's move to the cloud, say we want to work on AWS. When we want to deploy a new app, we start an EC2
instance, then some stuff needs to be installed on it, and then we move our code to the server.</p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              4/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-5">
          <div class="inner">
            
            <header><h2>Automated cloud deployment</h2></header>
            
            
            <section><ol>
<li>get instance on AWS EC2 (Terraform) </li>
<li>install stuff (Ansible + Docker)</li>
<li>Copy the app (Docker + ?)</li>
<li>so much winning, now automated</li>
</ol></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Here we've substituted human stuff with tools to automate the process. Last week we used Terraform to start up
instances, this week we're looking at Ansible to install stuff in step 2. </p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              5/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-6">
          <div class="inner">
            
            <header><h2>Why automate?</h2></header>
            
            
            <section><ul>
<li>humans make mistakes when they click</li>
<li>humans are inconsistent</li>
<li>humans don't naturally record what they did</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <ul>
<li>humans make mistakes when they click</li>
<li>humans are inconsistent... imagine if deploying one app required a user, 'deploy',
    another 'deploy_user': which one do I use for this app? Is it broken because it's broken or just
    because I used the wrong user?</li>
<li>humans don't make backups - when the server dies, the old code needs a similarly configured replacement. If a human did it, the only record of how the old server
    was configured WAS THE OLD SERVER THAT JUST DIED. Records are also important for version control.</li>
</ul>
<p>... and the more times they have to do something in a row, the more bored lazy tired the humans get</p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              6/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-7">
          <div class="inner">
            
            <header><h1>Finally some ansible</h1></header>
            
            
            <section><p>example/ansible/roles/python/tasks/main.yml</p>
<div class="highlight"><pre><span></span><span class="lineno">1 </span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">update apt-get</span>
<span class="lineno">2 </span>  <span class="l l-Scalar l-Scalar-Plain">raw</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">sudo apt-get -y update</span>
<span class="lineno">3 </span>
<span class="lineno">4 </span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">install python2</span>
<span class="lineno">5 </span>  <span class="l l-Scalar l-Scalar-Plain">raw</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">sudo apt-get -y install python python-pip python-setuptools</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              7/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-8">
          <div class="inner">
            
            <header><h1>Some more ansible</h1></header>
            
            
            <section><p>example/ansible/demo.yml</p>
<div class="highlight"><pre><span></span><span class="lineno">1 </span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">demo</span>
<span class="lineno">2 </span>  <span class="l l-Scalar l-Scalar-Plain">remote_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="lineno">3 </span>  <span class="l l-Scalar l-Scalar-Plain">become</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="lineno">4 </span>  <span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">no</span>
<span class="lineno">5 </span>  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
<span class="lineno">6 </span>    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">role</span><span class="p p-Indicator">:</span> <span class="nv">python</span> <span class="p p-Indicator">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>TODO:</p>
<p>create demo.yaml DONE
Document setup in readme.md
  make them run terraform apply to create instance so that inventory.sh can get the variables
  make them have an AWS key / secret for terraform
  ?? make them create a demo key + .pem for ~/.ssh to connect to box
  make them copy their public key from ~/.ssh/id_rsa.pub to keys/deploy.pub</p>
<p>make sure output.tf file is present in repo
instuctions present on this slide to fill in some small piece of Ruby
user add copies public key to box</p>
<p>Run ansible and then login with user just created</p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              8/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-9">
          <div class="inner">
            
            <header><h1>What else can you do in step 2?</h1></header>
            
            
            <section><ol>
<li>get instance on AWS EC2 (Terraform) </li>
<li>install stuff (Ansible + Docker)</li>
<li>Copy the app (Docker + ?)</li>
<li>so much winning, now automated</li>
</ol></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>Not sure about this slide</p>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              9/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-10">
          <div class="inner">
            
            <header><h1>Why is Ansible a good choice for this?</h1></header>
            
            
            <section><h2>easy to read</h2>
<h2>no agent on server</h2>
<h2>idempotent</h2>
<h2>declarative</h2></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              10/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-11">
          <div class="inner">
            
            <header><h1>Declarative</h1></header>
            
            
            <section><div class="highlight"><pre><span></span><span class="lineno"> 1 </span><span class="c1"># telling you how to get the answer I want</span>
<span class="lineno"> 2 </span><span class="k">def</span> <span class="nf">odd_numbers</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="lineno"> 3 </span>  <span class="n">output</span> <span class="o">=</span> <span class="o">[]</span>
<span class="lineno"> 4 </span>  <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="n">my_list</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span>
<span class="lineno"> 5 </span>    <span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="n">my_list</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="k">if</span> <span class="n">my_list</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>
<span class="lineno"> 6 </span>  <span class="k">end</span>
<span class="lineno"> 7 </span>  <span class="n">output</span>
<span class="lineno"> 8 </span><span class="k">end</span>
<span class="lineno"> 9 </span>
<span class="lineno">10 </span><span class="c1"># declarative - telling you what I want</span>
<span class="lineno">11 </span><span class="k">def</span> <span class="nf">odd_numbers</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="lineno">12 </span>  <span class="n">my_list</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span><span class="o">.</span><span class="n">odd?</span> <span class="p">}</span>
<span class="lineno">13 </span><span class="k">end</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              11/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-12">
          <div class="inner">
            
            <header><h1>Playbooks</h1></header>
            
            
            <section><h2>test</h2></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              12/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-13">
          <div class="inner">
            
            <header><h1>Roles</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              13/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-14">
          <div class="inner">
            
            <header><h1>Templates</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              14/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-15">
          <div class="inner">
            
            <header><h1>Variables</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              15/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-16">
          <div class="inner">
            
            <header><h1>Dependencies</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              16/17
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide slide-17">
          <div class="inner">
            
            <header><h1>Copying files</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            
            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>
            
            <aside class="page_number">
              17/17
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide:1">Intro to Ansible</a></th>
        <td><a href="#slide:1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide:2">Doing stuff with code</a></th>
        <td><a href="#slide:2">2</a></td>
      </tr>
      
        
        <tr id="toc-row-3" class="sub">
          <th><a href="#slide:3">Web app deployment</a></th>
          <td><a href="#slide:3">3</a></td>
        </tr>
        
        <tr id="toc-row-4" class="sub">
          <th><a href="#slide:4">Cloud deployment, e.g. AWS</a></th>
          <td><a href="#slide:4">4</a></td>
        </tr>
        
        <tr id="toc-row-5" class="sub">
          <th><a href="#slide:5">Automated cloud deployment</a></th>
          <td><a href="#slide:5">5</a></td>
        </tr>
        
        <tr id="toc-row-6" class="sub">
          <th><a href="#slide:6">Why automate?</a></th>
          <td><a href="#slide:6">6</a></td>
        </tr>
        
      
      
      <tr id="toc-row-7">
        <th><a href="#slide:7">Finally some ansible</a></th>
        <td><a href="#slide:7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide:8">Some more ansible</a></th>
        <td><a href="#slide:8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide:9">What else can you do in step 2?</a></th>
        <td><a href="#slide:9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide:10">Why is Ansible a good choice for this?</a></th>
        <td><a href="#slide:10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide:11">Declarative</a></th>
        <td><a href="#slide:11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide:12">Playbooks</a></th>
        <td><a href="#slide:12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide:13">Roles</a></th>
        <td><a href="#slide:13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide:14">Templates</a></th>
        <td><a href="#slide:14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide:15">Variables</a></th>
        <td><a href="#slide:15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide:16">Dependencies</a></th>
        <td><a href="#slide:16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide:17">Copying files</a></th>
        <td><a href="#slide:17">17</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
    <br>
    <strong>Generated with Darkslide 2.3.3</strong>
  </div>
  <script>main()</script>
</body>
</html>